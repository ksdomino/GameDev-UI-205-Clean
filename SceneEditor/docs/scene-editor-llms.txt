# CANVAS ENGINE SCENE EDITOR - LLM CONTEXT FILE
# Last Updated: 2026-01-13
# Version: 2.0.0
# Purpose: AI-powered scene editor for Canvas Engine games

================================================================================
TABLE OF CONTENTS
================================================================================

1. OVERVIEW
2. ARCHITECTURE  
3. SCREEN 1: DEBUG PANEL
4. SCREEN 2: SCENE EDITOR
5. DATA STRUCTURES
6. CLAUDE API INTEGRATION
7. VALIDATION RULES
8. DEVELOPMENT PHASES
9. EXAMPLE SCENE GENERATION
10. GLOSSARY

================================================================================
1. OVERVIEW
================================================================================

Web-based development tool with TWO screens for creating Canvas Engine games 
(vanilla JavaScript, 1080Ã—1920 portrait mobile games).

TARGET USER: Game developer with JavaScript knowledge, no React experience
TECH STACK: Vanilla JS, Express.js, Claude API (Anthropic)
COST: ~$0.03 per scene generation

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DEVELOPMENT ENVIRONMENT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   SCREEN 1: DEBUG PANEL              SCREEN 2: SCENE EDITOR                 â”‚
â”‚   http://localhost:3000/debug        http://localhost:3000/editor           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  Real-time debugging    â”‚        â”‚  Visual timeline editor â”‚           â”‚
â”‚   â”‚  â€¢ FPS monitoring       â”‚        â”‚  â€¢ Drag-drop states     â”‚           â”‚
â”‚   â”‚  â€¢ Entity inspector     â”‚        â”‚  â€¢ Asset management     â”‚           â”‚
â”‚   â”‚  â€¢ Layer toggles        â”‚        â”‚  â€¢ Claude API codegen   â”‚           â”‚
â”‚   â”‚  â€¢ Live property edit   â”‚        â”‚  â€¢ One-click export     â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚              â†“                                    â†“                         â”‚
â”‚         Test scenes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Generate scenes                   â”‚
â”‚              â†“                                    â†“                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚              Canvas Engine: /src/js/scenes/*.js               â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WORKFLOW:
1. Create scene visually in Scene Editor
2. Click "Generate Scene" â†’ Claude API creates JavaScript code
3. File saved to /src/js/scenes/
4. Switch to Debug Panel to test immediately
5. Iterate: edit â†’ regenerate â†’ test

================================================================================
2. ARCHITECTURE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BROWSER (localhost)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚     DEBUG PANEL            â”‚     â”‚     SCENE EDITOR           â”‚          â”‚
â”‚  â”‚     (debug.html)           â”‚     â”‚     (editor.html)          â”‚          â”‚
â”‚  â”‚  â€¢ DebugBridge class       â”‚     â”‚  â€¢ TimelineEditor class    â”‚          â”‚
â”‚  â”‚  â€¢ Real-time FPS graph     â”‚     â”‚  â€¢ StateEditor class       â”‚          â”‚
â”‚  â”‚  â€¢ Entity property editor  â”‚     â”‚  â€¢ AssetManager class      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚               â”‚                                     â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ Reads game state                    â”‚ HTTP Requests
                â†“                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    GAME ENGINE            â”‚         â”‚         EXPRESS SERVER (:3000)         â”‚
â”‚  â€¢ Engine.js              â”‚         â”‚                                        â”‚
â”‚  â€¢ SceneManager.js        â”‚         â”‚  GET  /debug      â†’ Debug panel HTML   â”‚
â”‚  â€¢ LayerManager.js        â”‚         â”‚  GET  /editor     â†’ Scene editor HTML  â”‚
â”‚  â€¢ InputHandler.js        â”‚         â”‚  POST /api/generate-scene â†’ Claude API â”‚
â”‚  â€¢ AssetLoader.js         â”‚         â”‚  POST /api/upload-asset â†’ File system  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  GET  /api/assets â†’ List files         â”‚
                                      â”‚  GET  /api/scenes â†’ List scenes        â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â†“ HTTPS
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚         CLAUDE API (Anthropic)         â”‚
                                      â”‚  Model: claude-sonnet-4-20250514       â”‚
                                      â”‚  Cost: ~$0.03 per generation           â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROJECT STRUCTURE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /Gamedev-Gui/                                                                â”‚
â”‚  â”œâ”€â”€ src/js/scenes/          â† GENERATED SCENES GO HERE                      â”‚
â”‚  â”‚   â”œâ”€â”€ Scene.js            (base class)                                    â”‚
â”‚  â”‚   â”œâ”€â”€ BootScene.js        (loading screen)                                â”‚
â”‚  â”‚   â””â”€â”€ [YourScene].js      â† Claude generates these                        â”‚
â”‚  â”œâ”€â”€ public/assets/          â† UPLOADED ASSETS GO HERE                       â”‚
â”‚  â”‚   â”œâ”€â”€ images/   â”œâ”€â”€ music/   â”œâ”€â”€ sfx/   â”œâ”€â”€ video/   â””â”€â”€ fonts/          â”‚
â”‚  â”œâ”€â”€ SceneEditor/            â† TOOL FILES                                    â”‚
â”‚  â”‚   â”œâ”€â”€ scene-editor-llms.txt   â””â”€â”€ PROJECT_HANDOFF.md                      â”‚
â”‚  â””â”€â”€ llms.txt                â† ENGINE DOCS (for Claude prompt)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
3. SCREEN 1: DEBUG PANEL
================================================================================

PURPOSE: Real-time debugging interface while developing/testing games
VIEWPORT: 1920Ã—1080 landscape
STATUS: Prototyped

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CANVAS ENGINE DEBUG PANEL                              [Toggle Preview â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚                             â”‚
â”‚  SCENE: [QuizIntroScene â–¼]                    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚    â”‚                   â”‚   â”‚
â”‚                                               â”‚    â”‚                   â”‚   â”‚
â”‚  ðŸ“Š PERFORMANCE                               â”‚    â”‚    GAME PREVIEW   â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚     480 Ã— 720     â”‚   â”‚
â”‚  â”‚ FPS: 60  â”‚  Entities: 45  â”‚  Mem: 23 MB â”‚ â”‚    â”‚    (half scale)   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚                   â”‚   â”‚
â”‚  â”‚ FPS â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–… â”‚ â”‚    â”‚                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚                   â”‚   â”‚
â”‚                                               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ðŸŽ¬ LAYERS                                    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                             â”‚
â”‚  â”‚ â˜‘ BG_FAR       (2 entities)             â”‚ â”‚                             â”‚
â”‚  â”‚ â˜‘ BG_NEAR      (0 entities)             â”‚ â”‚                             â”‚
â”‚  â”‚ â˜‘ VIDEO_IMAGE  (0 entities)             â”‚ â”‚                             â”‚
â”‚  â”‚ â˜‘ SHAPES       (12 entities)  âš ï¸        â”‚ â”‚                             â”‚
â”‚  â”‚ â˜‘ SPRITES      (28 entities)  âš ï¸        â”‚ â”‚                             â”‚
â”‚  â”‚ â˜‘ TEXT         (3 entities)             â”‚ â”‚                             â”‚
â”‚  â”‚ â˜‘ UI_BUTTONS   (2 entities)             â”‚ â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                             â”‚
â”‚                                               â”‚                             â”‚
â”‚  ðŸŽ® ENTITIES (SPRITES layer)                  â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                             â”‚
â”‚  â”‚ â–¼ player [Sprite]                       â”‚ â”‚                             â”‚
â”‚  â”‚   â”œâ”€ x: [  240 ] y: [  360 ]           â”‚ â”‚                             â”‚
â”‚  â”‚   â”œâ”€ w: [  128 ] h: [  128 ]           â”‚ â”‚                             â”‚
â”‚  â”‚   â”œâ”€ rotation: [ 0 ] alpha: [ 1.0 ]    â”‚ â”‚                             â”‚
â”‚  â”‚   â””â”€ â˜‘ visible  â˜‘ active                â”‚ â”‚                             â”‚
â”‚  â”‚ â–¶ enemy_01 [Sprite]                     â”‚ â”‚                             â”‚
â”‚  â”‚ â–¶ enemy_02 [Sprite]                     â”‚ â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                             â”‚
â”‚                                               â”‚                             â”‚
â”‚  ðŸ“¦ ASSETS                                    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                             â”‚
â”‚  â”‚ ðŸ–¼ï¸ player.png (512Ã—512) [Unload]        â”‚ â”‚                             â”‚
â”‚  â”‚ ðŸ”Š bgm.mp3 (3:24)        [Stop]         â”‚ â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FEATURES:
â€¢ Scene Switcher     - Dropdown to jump between scenes instantly
â€¢ FPS Graph          - 60-frame rolling history, color-coded
â€¢ Entity Count       - Per-layer count with warnings when >20
â€¢ Memory Display     - From assetLoader.getCacheStats()
â€¢ Layer Toggles      - Show/hide layers for debugging
â€¢ Entity Inspector   - Click to expand, edit properties live
â€¢ Property Editor    - Change x, y, rotation, alpha in real-time
â€¢ Asset Viewer       - List loaded assets with unload buttons
â€¢ Game Preview       - 480Ã—720 canvas embedded in panel

================================================================================
4. SCREEN 2: SCENE EDITOR
================================================================================

PURPOSE: Visual timeline-based scene creation with Claude API code generation
VIEWPORT: 1920Ã—1080 landscape
STATUS: To be built (Phases 1-4)

USER WORKFLOW:
1. Enter scene name (e.g., "QuizIntroScene")
2. Add states to timeline (visual bars)
3. Configure each state (duration, layers, assets)
4. Click "Generate Scene"
5. Claude API creates complete scene JavaScript
6. File saved to /src/js/scenes/
7. Test in Debug Panel

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CANVAS ENGINE SCENE EDITOR                    [Generate Scene] [Load] [New]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Scene Name: [ QuizIntroScene                                    ]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ðŸ“… TIMELINE                                                    [+ Add State]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 0s      1s      2s      3s      4s      5s      6s      7s      8s     â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚â”‚
â”‚  â”‚ â”‚   TITLE_SPLASH     â”‚â—„â”€â”€ drag edge to resize                          â”‚â”‚
â”‚  â”‚ â”‚   0.0s - 2.0s      â”‚                                                 â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚â”‚
â”‚  â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚â”‚
â”‚  â”‚                       â”‚     INSTRUCTIONS             â”‚                  â”‚â”‚
â”‚  â”‚                       â”‚     2.0s - 5.0s              â”‚                  â”‚â”‚
â”‚  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚â”‚
â”‚  â”‚                                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚                                                       â”‚  COUNTDOWN    â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚  5.0s - 8.0s  â”‚ â”‚â”‚
â”‚  â”‚                                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš™ï¸ SELECTED STATE: TITLE_SPLASH                              [Delete State]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Name: [ TITLE_SPLASH        ]    Duration: [ 2.0 ]s                    â”‚â”‚
â”‚  â”‚  â˜‘ Clear all layers when entering this state                            â”‚â”‚
â”‚  â”‚  Transition:  â—‰ Timer    â—‹ Button click    â—‹ Input                      â”‚â”‚
â”‚  â”‚  Next: [ INSTRUCTIONS â–¼ ]                                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸŽ¬ LAYER ASSIGNMENT                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  BG_FAR:      [ bg_logo.png â–¼ ]                                        â”‚â”‚
â”‚  â”‚               x: [   0 ] y: [   0 ] width: [ 1080 ] height: [ 1920 ]   â”‚â”‚
â”‚  â”‚               Animation: [ Fade In â–¼ ]  Duration: [ 1.0 ]s             â”‚â”‚
â”‚  â”‚  BG_NEAR:     [ None â–¼ ]                                               â”‚â”‚
â”‚  â”‚  VIDEO_IMAGE: [ None â–¼ ]                                               â”‚â”‚
â”‚  â”‚  SHAPES:      [ None â–¼ ]                                               â”‚â”‚
â”‚  â”‚  SPRITES:     [ None â–¼ ]                                               â”‚â”‚
â”‚  â”‚  TEXT:        [ None â–¼ ]                                               â”‚â”‚
â”‚  â”‚  UI_BUTTONS:  [ None â–¼ ]                                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ“¦ ASSETS                                          [â†‘ Upload Image/Audio]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ðŸ–¼ï¸ IMAGES                        ðŸ”Š AUDIO                              â”‚â”‚
â”‚  â”‚  â€¢ bg_logo.png    1080Ã—1920      â€¢ click.mp3         0.3s              â”‚â”‚
â”‚  â”‚  â€¢ player.png      512Ã—512       â€¢ bgm.mp3           3:24              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

THE 7 RENDER LAYERS (bottom to top):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer        â”‚ Index â”‚ Purpose                         â”‚ Entity Types      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BG_FAR       â”‚ 0     â”‚ Far parallax backgrounds        â”‚ Sprite            â”‚
â”‚ BG_NEAR      â”‚ 1     â”‚ Near parallax backgrounds       â”‚ Sprite            â”‚
â”‚ VIDEO_IMAGE  â”‚ 2     â”‚ Full-screen images/video        â”‚ Sprite, Video     â”‚
â”‚ SHAPES       â”‚ 3     â”‚ Primitive shapes, particles     â”‚ Custom render     â”‚
â”‚ SPRITES      â”‚ 4     â”‚ Game characters, objects        â”‚ Sprite, Animated  â”‚
â”‚ TEXT         â”‚ 5     â”‚ In-game text, HUD elements      â”‚ Text, Sprite      â”‚
â”‚ UI_BUTTONS   â”‚ 6     â”‚ Touch buttons (always top)      â”‚ Button            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ANIMATION OPTIONS:
â€¢ None             - Instant appearance
â€¢ Fade In          - alpha: 0 â†’ 1
â€¢ Fade Out         - alpha: 1 â†’ 0
â€¢ Slide In Top     - y: -height â†’ targetY
â€¢ Slide In Bottom  - y: 1920 â†’ targetY
â€¢ Slide In Left    - x: -width â†’ targetX
â€¢ Slide In Right   - x: 1080 â†’ targetX
â€¢ Scale In         - scale: 0 â†’ 1

================================================================================
5. DATA STRUCTURES
================================================================================

TIMELINE JSON FORMAT (sent to Claude API):

{
  "sceneName": "QuizIntroScene",
  "canvasSize": { "width": 1080, "height": 1920 },
  "states": [
    {
      "name": "TITLE_SPLASH",
      "startTime": 0.0,
      "duration": 2.0,
      "clearLayers": false,
      "layers": {
        "BG_FAR": [
          {
            "type": "sprite",
            "assetId": "bg_logo",
            "assetPath": "/assets/images/bg_logo.png",
            "x": 0, "y": 0,
            "width": 1080, "height": 1920,
            "rotation": 0, "alpha": 1,
            "animation": {
              "type": "fadeIn",
              "duration": 1.0
            }
          }
        ],
        "BG_NEAR": [],
        "VIDEO_IMAGE": [],
        "SHAPES": [],
        "SPRITES": [],
        "TEXT": [],
        "UI_BUTTONS": []
      },
      "transition": {
        "type": "timer",
        "duration": 2.0,
        "nextState": "INSTRUCTIONS",
        "nextScene": null
      }
    },
    {
      "name": "INSTRUCTIONS",
      "startTime": 2.0,
      "duration": 3.0,
      "clearLayers": true,
      "layers": {
        "TEXT": [
          {
            "type": "sprite",
            "assetId": "instruction_text",
            "assetPath": "/assets/images/instruction_text.png",
            "x": 90, "y": 200,
            "width": 900, "height": 400
          }
        ],
        "UI_BUTTONS": [
          {
            "type": "button",
            "x": 340, "y": 1200,
            "width": 400, "height": 120,
            "text": "Start Quiz",
            "color": "#4a9eff",
            "onClick": {
              "action": "switchScene",
              "target": "GameScene"
            }
          }
        ]
      },
      "transition": {
        "type": "button",
        "buttonText": "Start Quiz",
        "nextScene": "GameScene"
      }
    }
  ],
  "assets": {
    "images": [
      { "id": "bg_logo", "path": "/assets/images/bg_logo.png" },
      { "id": "instruction_text", "path": "/assets/images/instruction_text.png" }
    ],
    "audio": [
      { "id": "click", "path": "/assets/sfx/click.mp3" }
    ]
  }
}

================================================================================
6. CLAUDE API INTEGRATION
================================================================================

PROMPT STRUCTURE:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYSTEM: You are an expert Canvas Engine game developer.                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ USER MESSAGE CONTAINS:                                                       â”‚
â”‚                                                                              â”‚
â”‚ 1. ENGINE DOCS (llms.txt)                                                   â”‚
â”‚    - Full Canvas Engine documentation                                       â”‚
â”‚    - Scene patterns, layer system, input handling                           â”‚
â”‚                                                                              â”‚
â”‚ 2. ASSET PIPELINE DOCS (relevant sections)                                  â”‚
â”‚    - PO2 rules, memory management                                           â”‚
â”‚    - Performance requirements                                               â”‚
â”‚                                                                              â”‚
â”‚ 3. SCENE REQUIREMENTS                                                        â”‚
â”‚    - Scene name, canvas size                                                â”‚
â”‚    - States with timing and layer assignments                               â”‚
â”‚    - Assets to load                                                         â”‚
â”‚    - Transitions between states                                             â”‚
â”‚                                                                              â”‚
â”‚ 4. CODE REQUIREMENTS                                                         â”‚
â”‚    - Use deltaTime (dt) in SECONDS                                          â”‚
â”‚    - State machine with enum-like states object                             â”‚
â”‚    - Load assets in async init()                                            â”‚
â”‚    - Set up entities in populateLayers()                                    â”‚
â”‚    - Handle transitions in update(dt)                                       â”‚
â”‚    - Unload assets in exit()                                                â”‚
â”‚    - ES6 imports, default export                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

API CALL:

const response = await fetch('https://api.anthropic.com/v1/messages', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': process.env.ANTHROPIC_API_KEY,
    'anthropic-version': '2023-06-01'
  },
  body: JSON.stringify({
    model: 'claude-sonnet-4-20250514',
    max_tokens: 4000,
    messages: [{ role: 'user', content: prompt }]
  })
});

================================================================================
7. VALIDATION RULES
================================================================================

SCENE NAME:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rule                           â”‚ Valid            â”‚ Invalid          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Must be PascalCase             â”‚ QuizIntroScene   â”‚ quizIntroScene   â”‚
â”‚ Must end with "Scene"          â”‚ TitleScene       â”‚ Title            â”‚
â”‚ Must start with letter         â”‚ MyScene          â”‚ 123Scene         â”‚
â”‚ No spaces or special chars     â”‚ GameOverScene    â”‚ Game Over Scene  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STATE NAME:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rule                           â”‚ Valid            â”‚ Invalid          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Must be UPPER_SNAKE_CASE       â”‚ TITLE_SPLASH     â”‚ TitleSplash      â”‚
â”‚ Must be unique in scene        â”‚ (no duplicates)  â”‚ (duplicate)      â”‚
â”‚ No spaces                      â”‚ GAME_OVER        â”‚ GAME OVER        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TIMELINE:
â€¢ At least one state required
â€¢ States are sequential (no overlap)
â€¢ All states must have duration > 0
â€¢ Final state needs nextScene defined

ASSETS:
â€¢ Images: PNG, WebP, JPG only
â€¢ Audio: MP3 only
â€¢ Warn if images not PO2 dimensions
â€¢ Warn if images > 2048Ã—2048
â€¢ Warn if file > 500KB

================================================================================
8. DEVELOPMENT PHASES
================================================================================

PHASE 1: BACKEND + SIMPLE EDITOR (Week 1)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Express server with routes
â–¡ Claude API integration
â–¡ File writing to /src/js/scenes/
â–¡ Simple HTML form with JSON textarea
â–¡ Test with basic 2-state scene

Files: server.js, claude-api.js, editor.html, .env

PHASE 2: TIMELINE UI (Week 2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Visual timeline component
â–¡ Drag to resize state duration
â–¡ Click to select state
â–¡ Add/delete states
â–¡ State editor panel

Files: timeline.js, state-editor.js

PHASE 3: ASSET MANAGEMENT (Week 2-3)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ File upload UI
â–¡ Backend file copying
â–¡ Asset picker dropdowns
â–¡ Property editor per layer
â–¡ PO2 validation warnings

Files: asset-manager.js, layer-assignment.js

PHASE 4: POLISH & DEBUG (Week 3)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Debug Panel implementation
â–¡ Animation options
â–¡ Error handling
â–¡ Loading states
â–¡ Keyboard shortcuts

Files: debug.html, debug.js, animations.js

================================================================================
9. EXAMPLE SCENE GENERATION
================================================================================

INPUT (from Timeline Editor):

Scene: "QuizIntroScene"
States:
  1. TITLE_SPLASH (0-2s) - BG_FAR: bg_logo.png, fade in 1s
  2. INSTRUCTIONS (2-5s) - Clear, TEXT: instruction.png, BUTTON: "Start Quiz"
  3. COUNTDOWN (5-8s) - Clear, TEXT: countdown 3,2,1 â†’ GameScene

OUTPUT (Claude generates):

```javascript
import { Scene } from './Scene.js';
import { Sprite } from '../entities/Sprite.js';
import { Button } from '../entities/Button.js';

export default class QuizIntroScene extends Scene {
  constructor() {
    super('QuizIntroScene');
    
    this.states = {
      TITLE_SPLASH: 'TITLE_SPLASH',
      INSTRUCTIONS: 'INSTRUCTIONS',
      COUNTDOWN: 'COUNTDOWN'
    };
    
    this.currentState = this.states.TITLE_SPLASH;
    this.stateTimer = 0;
    this.countdownValue = 3;
    
    this.bgLogo = null;
    this.instructionText = null;
    this.startButton = null;
  }
  
  async init() {
    await this.engine.assetLoader.loadImages([
      { id: 'bg_logo', path: '/assets/images/bg_logo.png' },
      { id: 'instruction_text', path: '/assets/images/instruction_text.png' }
    ]);
  }
  
  enter() {
    super.enter();
    this.currentState = this.states.TITLE_SPLASH;
    this.stateTimer = 0;
  }
  
  exit() {
    super.exit();
    this.engine.assetLoader.unloadAssets(['bg_logo', 'instruction_text']);
  }
  
  populateLayers() {
    this.showTitleSplash();
  }
  
  showTitleSplash() {
    this.bgLogo = new Sprite(0, 0, 1080, 1920);
    this.bgLogo.setImage(this.engine.assetLoader.getImage('bg_logo'));
    this.bgLogo.alpha = 0;
    this.layerManager.addToLayer(this.bgLogo, 'BG_FAR');
  }
  
  showInstructions() {
    this.layerManager.clearAll();
    
    this.instructionText = new Sprite(90, 200, 900, 400);
    this.instructionText.setImage(this.engine.assetLoader.getImage('instruction_text'));
    this.layerManager.addToLayer(this.instructionText, 'TEXT');
    
    this.startButton = new Button(340, 1200, 400, 120, 'Start Quiz', '#4a9eff', 1, () => {
      this.sceneManager.switchTo('GameScene');
    });
    this.layerManager.addToLayer(this.startButton, 'UI_BUTTONS');
  }
  
  showCountdown() {
    this.layerManager.clearAll();
    this.countdownValue = 3;
    
    const countdownDisplay = {
      render: (ctx) => {
        ctx.fillStyle = '#ffffff';
        ctx.font = 'bold 120px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(this.countdownValue.toString(), 540, 960);
      }
    };
    this.layerManager.addToLayer(countdownDisplay, 'TEXT');
  }
  
  update(dt) {
    this.stateTimer += dt;
    
    switch (this.currentState) {
      case this.states.TITLE_SPLASH:
        if (this.bgLogo && this.bgLogo.alpha < 1) {
          this.bgLogo.alpha = Math.min(this.bgLogo.alpha + dt, 1);
        }
        if (this.stateTimer >= 2) {
          this.currentState = this.states.INSTRUCTIONS;
          this.stateTimer = 0;
          this.showInstructions();
        }
        break;
        
      case this.states.INSTRUCTIONS:
        if (this.inputHandler.mouse.pressed && this.startButton) {
          this.startButton.checkClick(
            this.inputHandler.mouse.x,
            this.inputHandler.mouse.y
          );
        }
        break;
        
      case this.states.COUNTDOWN:
        this.countdownValue = Math.max(1, 3 - Math.floor(this.stateTimer));
        if (this.stateTimer >= 3) {
          this.sceneManager.switchTo('GameScene');
        }
        break;
    }
  }
}
```

================================================================================
10. GLOSSARY
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Term            â”‚ Definition                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Scene           â”‚ A screen/level in the game (Title, Game, GameOver)        â”‚
â”‚ State           â”‚ A temporal phase within a scene (splash, instructions)     â”‚
â”‚ Layer           â”‚ Z-order rendering layer (BG_FAR, SPRITES, UI_BUTTONS)     â”‚
â”‚ Entity          â”‚ Game object with render() method (Sprite, Button)          â”‚
â”‚ Asset           â”‚ Image, audio, or video file                                â”‚
â”‚ Timeline        â”‚ Visual representation of states over time                  â”‚
â”‚ deltaTime (dt)  â”‚ Time since last frame in SECONDS (not ms!)                â”‚
â”‚ State Machine   â”‚ Pattern for managing state transitions                     â”‚
â”‚ PO2             â”‚ Power of Two (32, 64, 128, 256, 512, 1024, 2048)          â”‚
â”‚ Transition      â”‚ How a state advances (timer, button, input)                â”‚
â”‚ DebugBridge     â”‚ Class connecting debug panel to game engine                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
QUICK START
================================================================================

# Install dependencies
npm install express multer dotenv

# Create .env file
echo "ANTHROPIC_API_KEY=sk-your-key" > .env

# Start server
node server/server.js

# Open browser
http://localhost:3000/editor   # Scene Editor
http://localhost:3000/debug    # Debug Panel

================================================================================
END OF LLM CONTEXT FILE
================================================================================
